(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{38130:function(e,n,t){"use strict";t(67294);var a=t(85893);n.Z=function(e){return(0,a.jsx)("div",{className:"w-100 text-center",children:(0,a.jsx)("div",{className:"spinner-border",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}},70592:function(e,n,t){"use strict";var a=t(4942),r=t(67294),o=t(30463),s=t(42153),i=t(39249),c=(t(32561),t(77090),t(85893));function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u="https://programmingzeal.com/";n.Z=function(e){var n=e.onPick,t=e.isModal,a=void 0!==t&&t,l=(0,o.uI)({accept:"image/*",maxFiles:1,maxSize:512e6,onDrop:function(e){e.map((function(e){k.current.src=URL.createObjectURL(e)}))}}),m=l.acceptedFiles,p=l.getRootProps,f=l.getInputProps,h=(0,r.useState)({data:"all"}),x=h[0],v=(h[1],(0,r.useState)([])),b=v[0],j=v[1],g=(0,r.useState)(0),N=g[0],y=g[1],w=(0,r.useRef)(null),k=(0,r.useRef)(null);(0,r.useEffect)((function(){O()}),[N]),(0,r.useRef)(null);var O=function(){var e=x.data;if("all"===e){var n={query:""};""===e||(n.query="all"),(0,s.hd)("/fetchImages",{data:n,cb:function(e){var n=e.data.DATA;console.log(n),j(n),S(n)}})}},S=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(window.editor){var t=editor.AssetManager,a=n.map((function(e){return{src:"https://www.programmingzeal.com/"+e.link}}));t.add(a)}else setTimeout((function(){e(n)}),10)},C=b.map((function(e){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"col-md-3 mb-2",id:"img-card-".concat(e.id),children:(0,c.jsxs)("div",{className:"card text-wrap position-relative",children:[(0,c.jsx)("div",{className:"btn-toolbar mx-auto mb-1 position-absolute start-0",role:"toolbar","aria-label":"Toolbar with button groups",children:(0,c.jsxs)("div",{className:"btn-group me-2",role:"group","aria-label":"First group",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){!function(e){(0,s.hd)("/deleteImage",{data:e,cb:function(n){document.querySelector("#img-card-"+e).remove(),i.Am.error("image deleted successfully")}})}(e.id)},children:(0,c.jsx)("i",{className:"fa fa-trash"})}),(0,c.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){var n;n=e,navigator.clipboard.writeText(n.link).then((function(){i.Am.info("image path copied!")}),(function(e){console.error("Could not copy text: ")}))},children:(0,c.jsx)("i",{className:"fa fa-copy"})}),a?(0,c.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){n({coverImage:u+e.link,pc:e.pc||""}),document.querySelector("#imagesModal [data-bs-dismiss='modal']").click()},children:(0,c.jsx)("i",{className:"far fa-check-square"})}):null]})}),(0,c.jsx)("img",{alt:e.link,className:"img-thumbnail lazyload",id:"img".concat(e.id),"data-src":u+e.link}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)("div",{className:"card-text text-truncate",dangerouslySetInnerHTML:{__html:e.pc}})})]})},e.id)})})),P=(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("div",{className:"row",children:(0,c.jsxs)("div",{className:"col-md-12",children:[(0,c.jsxs)("div",d(d({},p({className:"dropzone",onClick:function(e){console.log("event ",e),e.preventDefault()}})),{},{children:[(0,c.jsx)("input",d({},f())),(0,c.jsx)("p",{className:"text-wrap",children:"Drag ` & apos; `n` & apos; ` drop some files here, or click to select files"})]})),(0,c.jsxs)("div",{className:"row my-3",children:[(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsx)("textarea",{id:"pc",className:"form-control resize-none",placeholder:"enter pic credits"})}),(0,c.jsx)("div",{className:"col-md-2",children:(0,c.jsx)("img",{className:"img-thumbnail lazyload",ref:k})}),(0,c.jsx)("div",{className:"col-md-2",children:(0,c.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=m[0],n=new FormData;n.append("file",e);var t=document.querySelector("#pc").value;n.append("pc",t);var a={data:n,cb:function(e){console.log("resp from fil upload",e);var n=e.data,t=n.image,a=n.Status,r=n.message;if("fail"==a)i.Am.error(r);else{var o=b;o.unshift(t),j(o),y(N+1)}}};(0,s.T9)("/upload",a)}()},children:"upload"})})]})]})}),(0,c.jsx)("input",{ref:w,className:"d-none"}),(0,c.jsx)("div",{className:"row",children:C})]});return(0,c.jsxs)(c.Fragment,{children:[a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",className:"","data-bs-toggle":"modal","data-bs-target":"#imagesModal",children:(0,c.jsx)("i",{className:"fas fa-image"})}),(0,c.jsx)("div",{className:"modal fade ",id:"imagesModal",tabIndex:"-1","aria-labelledby":"imagesModalLabel","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog modal-lg",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"imagesModalLabel",children:"Images"}),(0,c.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,c.jsx)("div",{className:"modal-body",children:P}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,c.jsx)("button",{type:"button",className:"btn btn-primary",children:"Save changes"})]})]})})})]}):P,(0,c.jsx)("style",{children:".dropzone {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 20px;\n    border-width: 2px;\n    border-radius: 2px;\n    border-color: #eeeeee;\n    border-style: dashed;\n    background-color: #fafafa;\n    color: #bdbdbd;\n    outline: none;\n    transition: border .24s ease-in-out;\n}"})]})}},33810:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var a=t(9008),r=t(41664),o=t(11163),s=t(67294),i=t(42100),c=t(32561),l=t(18828),d=t(85893),u=function(e){e.props;var n=(0,s.useContext)(l.j),t=n.userInfo,a=n.updateUserInfo,u=(0,s.useState)(!1),m=u[0],p=u[1];(0,o.useRouter)();(0,s.useEffect)((function(){(0,i._D)(),p(!(0,c.xb)(t)&&t.username)}),[t]);t.username;var f=t.role,h=void 0===f?"":f,x=function(e){return"".concat(""==h?"":"/"+h.toLowerCase())+e};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light pz_navbar pz-navbar-light",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsx)("a",{className:"navbar-brand",href:"#",children:"PZ"}),(0,d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,d.jsx)("span",{className:"navbar-toggler-icon"})}),(0,d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,d.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/home"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"Home"})})}),m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/cards"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"cards"})})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/posts"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"posts"})})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/stats"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"stats"})})}),(0,d.jsxs)("li",{className:"nav-item dropdown",children:[(0,d.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.username}),(0,d.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[(0,d.jsx)("li",{children:(0,d.jsx)("hr",{className:"dropdown-divider"})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/"),children:(0,d.jsx)("a",{className:"nav-item nav-link",onClick:function(e){(0,i.wt)(e),a({},"userInfo"),p(!1)},children:"Logout"})})})]})]})]}):(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(r.default,{href:x("/login"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"Login"})})})]}),(0,d.jsxs)("form",{className:"d-flex",children:[(0,d.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),(0,d.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})]})]})})})},m=t(39249);function p(e){e.copyright;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("footer",{className:"footer-main text-center",children:(0,d.jsxs)("div",{className:"",style:{paddingTop:"1rem",paddingBottom:"1rem"},children:[(0,d.jsx)("h1",{children:"footer"}),(0,d.jsx)(m.Ix,{position:"top-right",autoClose:5e3,transition:m.Mi,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}),(0,d.jsx)("script",{defer:!0,src:"/PZ/grapesjs-custom-code.min.js"})]})}function f(e){var n=e.children,t=e.title,r=void 0===t?"Programming Zeal":t,o=e.description,s=void 0===o?"":o,i=e.keywords,c=void 0===i?"":i,l=e.type,m=void 0===l?"website":l,f=e.url,h=void 0===f?"/":f,x=e.image,v=void 0===x?"/nextjs.svg":x,b=e.origin,j=void 0===b?"":b;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(a.default,{children:[(0,d.jsx)("meta",{charSet:"utf-8"}),(0,d.jsx)("title",{children:r}),(0,d.jsx)("meta",{name:"robots",content:"index, follow"}),(0,d.jsx)("meta",{name:"description",content:s}),(0,d.jsx)("meta",{name:"keywords",content:c}),(0,d.jsx)("meta",{property:"twitter:image:src",content:"".concat(j).concat(v,"?v=").concat(Math.floor(Date.now()/100))}),(0,d.jsx)("meta",{property:"twitter:card",content:"summary"}),(0,d.jsx)("meta",{property:"twitter:url",content:h}),(0,d.jsx)("meta",{property:"twitter:title",content:r}),(0,d.jsx)("meta",{property:"twitter:description",content:s}),(0,d.jsx)("meta",{property:"og:image",content:"".concat(j).concat(v,"?v=").concat(Math.floor(Date.now()/100))}),(0,d.jsx)("meta",{property:"og:site_name",content:h}),(0,d.jsx)("meta",{property:"og:type",content:m}),(0,d.jsx)("meta",{property:"og:title",content:r}),(0,d.jsx)("meta",{property:"og:url",content:h}),(0,d.jsx)("meta",{property:"og:description",content:s}),(0,d.jsx)("link",{rel:"icon",href:"https://www.programmingzeal.com/assets/favicon.ico"}),(0,d.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"})]}),(0,d.jsx)(u,{}),n,(0,d.jsx)(p,{})]})}},42100:function(e,n,t){"use strict";t.d(n,{wt:function(){return s},_D:function(){return i}});var a=t(11163),r=t(31955),o=(t(49704),t(32561));t(34155).env.JWT_KEY;function s(e){e&&e.preventDefault(),r.Z.remove("token"),(0,o.U2)("userInfo"),a.default.push("/login")}function i(){var e=(0,o.YO)("userInfo"),n=function(){try{var e=r.Z.get("token")||{};return JSON.parse(atob(e.split(".")[1])||"{}")}catch(n){return{}}}().exp,t=void 0===n?0:n,s=Date.now();if(s>1e3*t&&(0,o.xb)(e))for(var i=a.default.router.route,c=0,l=["/user","/admin"];c<l.length;c++){var d=l[c];if(i.includes(d)){a.default.push("/login");break}}else s>1e3*t&&(0,o.U2)("userInfo")}},42153:function(e,n,t){"use strict";t.d(n,{GH:function(){return l},hd:function(){return u},T9:function(){return m}});var a=t(31955),r=t(49704),o=t.n(r),s=t(32561),i=t(42100),c="https://programmingzeal.com/";function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.data,a=void 0===t?{}:t,r=n.cb;n.method;fetch(c+e,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),r(e)})).catch((function(e){console.error("Error:",e)}))}var d=function(e){var n=o().decode(e);return 1e3*parseInt(n.exp)>Date.now()};function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s.YO)("userInfo"),r=n.data,o=void 0===r?{}:r,l=n.cb,u=(n.method,t.role),m=a.Z.get("token");if(m&&d(m))u&&(e=u.toLowerCase()+e),fetch(c+e,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+m,TOKEN:"plain/text"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l(e)})).catch((function(e){console.error("Error:",e)}));else{if(window){var p=window.location.href;(0,s.Pf)("refUrl",p)}(0,i.wt)()}}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s.YO)("userInfo"),r=n.data,o=void 0===r?{}:r,l=n.cb,u=(n.method,t.role),m=a.Z.get("token");m&&d(m)?(u&&(e=u.toLowerCase()+e),fetch(c+e,{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+m,TOKEN:"plain/text"},body:o}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l(e)})).catch((function(e){console.error("Error:",e)}))):(0,i.wt)()}},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}}]);