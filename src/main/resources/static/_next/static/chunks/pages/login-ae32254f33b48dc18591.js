(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{33810:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(9008),a=t(41664),s=t(11163),o=t(67294),i=t(42100),c=t(32561),l=t(18828),d=t(85893),u=function(e){e.props;var n=(0,o.useContext)(l.j),t=n.userInfo,r=n.updateUserInfo,u=(0,o.useState)(!1),m=u[0],h=u[1];(0,s.useRouter)();(0,o.useEffect)((function(){(0,i._D)(),h(!(0,c.xb)(t)&&t.username)}),[t]);t.username;var f=t.role,p=void 0===f?"":f,v=function(e){return"".concat(""==p?"":"/"+p.toLowerCase())+e};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light pz_navbar pz-navbar-light",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsx)("a",{className:"navbar-brand",href:"#",children:"PZ"}),(0,d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,d.jsx)("span",{className:"navbar-toggler-icon"})}),(0,d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,d.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/home"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"Home"})})}),m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/cards"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"cards"})})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/posts"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"posts"})})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/stats"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"stats"})})}),(0,d.jsxs)("li",{className:"nav-item dropdown",children:[(0,d.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.username}),(0,d.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[(0,d.jsx)("li",{children:(0,d.jsx)("hr",{className:"dropdown-divider"})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/"),children:(0,d.jsx)("a",{className:"nav-item nav-link",onClick:function(e){(0,i.wt)(e),r({},"userInfo"),h(!1)},children:"Logout"})})})]})]})]}):(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(a.default,{href:v("/login"),children:(0,d.jsx)("a",{className:"nav-item nav-link",children:"Login"})})})]}),(0,d.jsxs)("form",{className:"d-flex",children:[(0,d.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),(0,d.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})]})]})})})},m=t(39249);function h(e){e.copyright;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("footer",{className:"footer-main text-center",children:(0,d.jsxs)("div",{className:"",style:{paddingTop:"1rem",paddingBottom:"1rem"},children:[(0,d.jsx)("h1",{children:"footer"}),(0,d.jsx)(m.Ix,{position:"top-right",autoClose:5e3,transition:m.Mi,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}),(0,d.jsx)("script",{defer:!0,src:"/PZ/grapesjs-custom-code.min.js"})]})}function f(e){var n=e.children,t=e.title,a=void 0===t?"Programming Zeal":t,s=e.description,o=void 0===s?"":s,i=e.keywords,c=void 0===i?"":i,l=e.type,m=void 0===l?"website":l,f=e.url,p=void 0===f?"/":f,v=e.image,x=void 0===v?"/nextjs.svg":v,g=e.origin,j=void 0===g?"":g;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(r.default,{children:[(0,d.jsx)("meta",{charSet:"utf-8"}),(0,d.jsx)("title",{children:a}),(0,d.jsx)("meta",{name:"robots",content:"index, follow"}),(0,d.jsx)("meta",{name:"description",content:o}),(0,d.jsx)("meta",{name:"keywords",content:c}),(0,d.jsx)("meta",{property:"twitter:image:src",content:"".concat(j).concat(x,"?v=").concat(Math.floor(Date.now()/100))}),(0,d.jsx)("meta",{property:"twitter:card",content:"summary"}),(0,d.jsx)("meta",{property:"twitter:url",content:p}),(0,d.jsx)("meta",{property:"twitter:title",content:a}),(0,d.jsx)("meta",{property:"twitter:description",content:o}),(0,d.jsx)("meta",{property:"og:image",content:"".concat(j).concat(x,"?v=").concat(Math.floor(Date.now()/100))}),(0,d.jsx)("meta",{property:"og:site_name",content:p}),(0,d.jsx)("meta",{property:"og:type",content:m}),(0,d.jsx)("meta",{property:"og:title",content:a}),(0,d.jsx)("meta",{property:"og:url",content:p}),(0,d.jsx)("meta",{property:"og:description",content:o}),(0,d.jsx)("link",{rel:"icon",href:"https://www.programmingzeal.com/assets/favicon.ico"}),(0,d.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"})]}),(0,d.jsx)(u,{}),n,(0,d.jsx)(h,{})]})}},42100:function(e,n,t){"use strict";t.d(n,{wt:function(){return o},_D:function(){return i}});var r=t(11163),a=t(31955),s=(t(49704),t(32561));t(34155).env.JWT_KEY;function o(e){e&&e.preventDefault(),a.Z.remove("token"),(0,s.U2)("userInfo"),r.default.push("/login")}function i(){var e=(0,s.YO)("userInfo"),n=function(){try{var e=a.Z.get("token")||{};return JSON.parse(atob(e.split(".")[1])||"{}")}catch(n){return{}}}().exp,t=void 0===n?0:n,o=Date.now();if(o>1e3*t&&(0,s.xb)(e))for(var i=r.default.router.route,c=0,l=["/user","/admin"];c<l.length;c++){var d=l[c];if(i.includes(d)){r.default.push("/login");break}}else o>1e3*t&&(0,s.U2)("userInfo")}},13064:function(e){e.exports={basePath:"/PZ",reactStrictMode:!0,compilerOptions:{baseUrl:".",paths:{"@/components/*":["./components/*"]}}}},42153:function(e,n,t){"use strict";t.d(n,{GH:function(){return l},hd:function(){return u},T9:function(){return m}});var r=t(31955),a=t(49704),s=t.n(a),o=t(32561),i=t(42100),c="https://programmingzeal.com/";function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.data,r=void 0===t?{}:t,a=n.cb;n.method;fetch(c+e,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),a(e)})).catch((function(e){console.error("Error:",e)}))}var d=function(e){var n=s().decode(e);return 1e3*parseInt(n.exp)>Date.now()};function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o.YO)("userInfo"),a=n.data,s=void 0===a?{}:a,l=n.cb,u=(n.method,t.role),m=r.Z.get("token");if(m&&d(m))u&&(e=u.toLowerCase()+e),fetch(c+e,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+m,TOKEN:"plain/text"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l(e)})).catch((function(e){console.error("Error:",e)}));else{if(window){var h=window.location.href;(0,o.Pf)("refUrl",h)}(0,i.wt)()}}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o.YO)("userInfo"),a=n.data,s=void 0===a?{}:a,l=n.cb,u=(n.method,t.role),m=r.Z.get("token");m&&d(m)?(u&&(e=u.toLowerCase()+e),fetch(c+e,{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+m,TOKEN:"plain/text"},body:s}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l(e)})).catch((function(e){console.error("Error:",e)}))):(0,i.wt)()}},41162:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var r=t(67294),a=(t(41664),t(11163)),s=t(31955),o=t(18828),i=t(42153),c=(t(77090),t(33810)),l=t(32561),d=t(13064),u=t(94649),m=t(85893),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return new Date((new Date).getTime()+10*e*60*1e3)};function f(e){var n=(0,r.useContext)(o.j),t=n.userInfo,f=n.updateUserInfo,p=(0,r.useState)({MESSAGE:"",status:""}),v=p[0],x=p[1];return(0,m.jsx)(c.Z,{children:(0,m.jsx)("div",{className:"container",children:(0,m.jsx)("main",{children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h3",{children:"Login to continue"}),(0,m.jsx)("div",{children:(0,m.jsx)(u.J9,{initialValues:{username:"",password:""},validate:function(e){var n={};return e.username?e.username.length<3&&(n.username="please enter username min 3 char"):n.username="Username required",e.password?e.password.length<3&&(n.username="please enter password min 3 char"):n.password="Password required",n},onSubmit:function(e,n){var r=n.setSubmitting;setTimeout((function(){var n={data:e,cb:function(e){var n=e.STATUS,r=e.MESSAGE;if(n&&"success"===n){var o=e.DATA,i=o.TOKEN,c=o.user_info;Object.assign(t,c),f(t,"userInfo"),s.Z.set("token",i,{expires:h(60),sameSite:"None",secure:!0}),(0,l.C_)("userInfo",t);var d=localStorage.getItem("refUrl")||"";""!=d?a.default.push(d):a.default.push("user/home")}else e.status="error",e.error=r,x({MESSAGE:r,status:"error"})}};(0,i.GH)("loginuser",n),r(!1)}),400)},children:function(e){var n=e.values,t=e.errors,r=e.touched,a=e.handleChange,s=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting;return(0,m.jsx)("main",{className:"form-signin login-div border border-dark rounded-3 shadow p-3 mb-5 bg-body rounded",children:(0,m.jsxs)("form",{onSubmit:o,children:[(0,m.jsx)("div",{className:"text-center w-100",children:(0,m.jsx)("img",{className:"mb-4 lazyload",src:"".concat(d.basePath,"/icons/login.png"),alt:"",width:"72"})}),(0,m.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Please sign in"}),(0,m.jsx)("div",{className:"alert alert-danger ".concat("error"==v.status?"d-block":"d-none"),role:"alert",children:v.MESSAGE}),(0,m.jsxs)("div",{className:"form-floating",children:[(0,m.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",name:"username",placeholder:"name@example.com",onChange:a,onBlur:s,value:n.username,"aria-describedby":"emailHelpBlock"}),(0,m.jsx)("label",{htmlFor:"floatingInput",children:"Email address"}),(0,m.jsx)("div",{id:"emailHelpBlock",className:"form-text error-msg",children:t.username&&r.username&&t.username})]}),(0,m.jsxs)("div",{className:"form-floating",children:[(0,m.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",name:"password",onChange:a,onBlur:s,value:n.password,placeholder:"Password","aria-describedby":"passwordHelpBlock"}),(0,m.jsx)("label",{htmlFor:"floatingPassword",children:"Password"}),(0,m.jsx)("div",{id:"passwordHelpBlock",className:"form-text error-msg",children:t.password&&r.password&&t.password})]}),(0,m.jsx)("button",{type:"submit",disabled:i,className:"w-100 btn btn-lg btn-primary",children:"Login"})]})})}})}),(0,m.jsx)("style",{children:"\n             \n             \n"})]})})})})}},7156:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(41162)}])},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[142,959,774,888,179],(function(){return n=7156,e(e.s=n);var n}));var n=e.O();_N_E=n}]);